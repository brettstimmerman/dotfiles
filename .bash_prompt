export MAGENTA="\033[1;31m"
export GREEN="\033[1;32m"
export ORANGE="\033[1;33m"
export BLUE="\033[1;34m"
export PURPLE="\033[1;35m"
export CYAN="\033[1;36m"
export WHITE="\033[1;37m"
export BOLD=""
export RESET="\033[m"

function parse_git_dirty() {
    [[ $(git status 2> /dev/null | tail -n1) != "nothing to commit (working directory clean)" ]] && echo "*"
}

function parse_git_branch() {
    local COLOR=$PURPLE
    local BRANCH=$(git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e 's/* //')

    if [ $BRANCH ]; then
        local DIRTY=$(parse_git_dirty)

        if [ -n "$DIRTY" ]; then
            COLOR=$MAGENTA
        fi

        echo -ne "$WHITE on $COLOR$BRANCH$DIRTY"
    fi
}

case $TERM in
    xterm*)
    TITLEBAR='\[\033]0;\w\007\]'
    ;;
    *)
    TITLEBAR=""
    ;;
esac

export PS1="$TITLEBAR\[$GREEN\]\w\$(parse_git_branch)\[$WHITE\] \$ \[$RESET\]"
export PS2="\[$ORANGE\]â†’ \[$RESET\]"
